<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>rbui log analysis report</title>
  <meta name="description" content="rbui log analysis report">
  <style type="text/css">
    html, body {
      background-color: black;
    }
    th {
      text-align: center;
      color: silver;
      font-style: bold;
      padding: 5px;
      cursor: pointer;
    }
    table {
      width: auto;
      border-collapse: collapse;
      margin: 1%;
      color: silver;
    }
    td {
      text-align: right;
      font-size: 1.1em;
      padding: 5px;
    }
    .report-table-body-cell-url {
      text-align: left;
      width: 20%;
    }
    .clipped {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow:hidden !important;
      max-width: 700px;
      word-wrap: break-word;
      display:inline-block;
    }
    .url {
      cursor: pointer;
      color: #729FCF;
    }
    .alert {
      color: red;
    }
  </style>
</head>

<body>
  <table border="1" class="report-table">
  <thead>
    <tr class="report-table-header-row">
    </tr>
  </thead>
  <tbody class="report-table-body">
  </tbody>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="jquery.tablesorter.min.js"></script> 
  <script type="text/javascript">
  !function($) {
    var table = [{"url":"\/api\/v2\/internal\/html5\/phantomjs\/queue\/?wait=1m","time_sum":174306.352,"count":2767,"time_max":9843.569,"count_perc":0.106,"time_avg":62.995,"time_perc":9.043},{"url":"\/api\/v2\/internal\/gpmd_plan_report\/queue\/?wait=1m&worker=5","time_sum":94618.864,"count":1410,"time_max":9853.373,"count_perc":0.054,"time_avg":67.106,"time_perc":4.909},{"url":"\/api\/v2\/internal\/gpmd_plan_report\/queue\/?wait=1m&worker=2","time_sum":94537.857,"count":1409,"time_max":9826.572,"count_perc":0.054,"time_avg":67.096,"time_perc":4.905},{"url":"\/api\/v2\/internal\/gpmd_plan_report\/queue\/?wait=1m&worker=3","time_sum":93594.358,"count":1393,"time_max":9853.242,"count_perc":0.053,"time_avg":67.189,"time_perc":4.856},{"url":"\/api\/v2\/internal\/gpmd_plan_report\/queue\/?wait=1m&worker=4","time_sum":93448.983,"count":1392,"time_max":9826.209,"count_perc":0.053,"time_avg":67.133,"time_perc":4.848},{"url":"\/api\/v2\/internal\/gpmd_plan_report\/queue\/?wait=1m&worker=1","time_sum":85075.406,"count":1414,"time_max":71.291,"count_perc":0.054,"time_avg":60.166,"time_perc":4.414},{"url":"\/export\/ivi\/200010-impression.csv","time_sum":21951.65,"count":1320,"time_max":24.053,"count_perc":0.051,"time_avg":16.63,"time_perc":1.139},{"url":"\/api\/v2\/group\/7123018\/banners","time_sum":10247.771,"count":784,"time_max":9811.46,"count_perc":0.03,"time_avg":13.071,"time_perc":0.532},{"url":"\/api\/v2\/banner\/26647998","time_sum":10097.195,"count":252,"time_max":9811.884,"count_perc":0.01,"time_avg":40.068,"time_perc":0.524},{"url":"\/api\/v2\/banner\/26619125","time_sum":10093.061,"count":252,"time_max":9811.885,"count_perc":0.01,"time_avg":40.052,"time_perc":0.524},{"url":"\/api\/v2\/banner\/26618742","time_sum":10089.699,"count":252,"time_max":9811.885,"count_perc":0.01,"time_avg":40.038,"time_perc":0.523},{"url":"\/api\/v2\/banner\/26598670","time_sum":10073.002,"count":252,"time_max":9811.885,"count_perc":0.01,"time_avg":39.972,"time_perc":0.523},{"url":"\/campaigns\/7854376\/banners\/?","time_sum":10068.972,"count":699,"time_max":119.987,"count_perc":0.027,"time_avg":14.405,"time_perc":0.522},{"url":"\/api\/v2\/banner\/24389816","time_sum":10059.692,"count":252,"time_max":9811.886,"count_perc":0.01,"time_avg":39.919,"time_perc":0.522},{"url":"\/api\/v2\/banner\/24359968","time_sum":10058.138,"count":252,"time_max":9811.887,"count_perc":0.01,"time_avg":39.913,"time_perc":0.522},{"url":"\/api\/v2\/banner\/26594175","time_sum":10057.724,"count":252,"time_max":9811.886,"count_perc":0.01,"time_avg":39.912,"time_perc":0.522},{"url":"\/api\/v2\/banner\/26588410","time_sum":10047.677,"count":252,"time_max":9811.886,"count_perc":0.01,"time_avg":39.872,"time_perc":0.521},{"url":"\/api\/v2\/banner\/26585041","time_sum":10045.223,"count":252,"time_max":9811.886,"count_perc":0.01,"time_avg":39.862,"time_perc":0.521},{"url":"\/api\/v2\/banner\/24337272","time_sum":10044.812,"count":252,"time_max":9811.887,"count_perc":0.01,"time_avg":39.86,"time_perc":0.521},{"url":"\/campaigns\/7854473\/banners\/?","time_sum":8008.609,"count":699,"time_max":25.643,"count_perc":0.027,"time_avg":11.457,"time_perc":0.415},{"url":"\/\/api\/1\/banners\/","time_sum":5433.568,"count":48,"time_max":250.059,"count_perc":0.002,"time_avg":113.199,"time_perc":0.282},{"url":"\/api\/v2\/internal\/slots","time_sum":5341.743,"count":236,"time_max":36.195,"count_perc":0.009,"time_avg":22.635,"time_perc":0.277},{"url":"\/campaigns\/","time_sum":5256.369,"count":1294,"time_max":685.529,"count_perc":0.05,"time_avg":4.062,"time_perc":0.273},{"url":"\/api\/v2\/slot\/2406\/groups","time_sum":4834.106,"count":47,"time_max":128.52,"count_perc":0.002,"time_avg":102.853,"time_perc":0.251},{"url":"\/campaigns\/7876636\/banners\/?","time_sum":4696.93,"count":699,"time_max":119.979,"count_perc":0.027,"time_avg":6.719,"time_perc":0.244},{"url":"\/api\/1\/photogenic_banners\/post\/","time_sum":4689.335,"count":19764,"time_max":24.869,"count_perc":0.756,"time_avg":0.237,"time_perc":0.243},{"url":"\/campaigns\/7854362\/banners\/?","time_sum":4476.217,"count":700,"time_max":26.287,"count_perc":0.027,"time_avg":6.395,"time_perc":0.232},{"url":"\/campaigns\/7876633\/banners\/?","time_sum":4088.215,"count":699,"time_max":119.976,"count_perc":0.027,"time_avg":5.849,"time_perc":0.212},{"url":"\/campaigns\/7854359\/banners\/?","time_sum":3920.087,"count":700,"time_max":22.854,"count_perc":0.027,"time_avg":5.6,"time_perc":0.203},{"url":"\/api\/1\/banners\/?campaign=1392872","time_sum":3786.887,"count":56,"time_max":81.628,"count_perc":0.002,"time_avg":67.623,"time_perc":0.196},{"url":"\/api\/1\/banners\/?campaign=1200302","time_sum":3777.55,"count":56,"time_max":82.477,"count_perc":0.002,"time_avg":67.456,"time_perc":0.196},{"url":"\/campaigns\/statistic\/?date1=01-06-2017&date2=30-06-2017&date_type=day&do=1","time_sum":3592.436,"count":576,"time_max":17.822,"count_perc":0.022,"time_avg":6.237,"time_perc":0.186},{"url":"\/campaigns\/7854408\/banners\/?","time_sum":3305.016,"count":699,"time_max":119.966,"count_perc":0.027,"time_avg":4.728,"time_perc":0.171},{"url":"\/campaigns\/7854389\/banners\/?","time_sum":3168.186,"count":699,"time_max":119.964,"count_perc":0.027,"time_avg":4.532,"time_perc":0.164},{"url":"\/api\/v2\/slot\/2902\/groups","time_sum":3074.743,"count":189,"time_max":23.775,"count_perc":0.007,"time_avg":16.268,"time_perc":0.16},{"url":"\/campaigns\/7854366\/banners\/?","time_sum":2790.323,"count":699,"time_max":9.113,"count_perc":0.027,"time_avg":3.992,"time_perc":0.145},{"url":"\/slots\/3938\/","time_sum":2707.482,"count":444,"time_max":99.429,"count_perc":0.017,"time_avg":6.098,"time_perc":0.14},{"url":"\/campaigns\/7806980\/banners\/","time_sum":2638.779,"count":1374,"time_max":1004.924,"count_perc":0.053,"time_avg":1.921,"time_perc":0.137},{"url":"\/campaigns\/7854372\/banners\/?","time_sum":2584.754,"count":699,"time_max":7.036,"count_perc":0.027,"time_avg":3.698,"time_perc":0.134},{"url":"\/upload_file\/ajax\/","time_sum":2514.586,"count":4387,"time_max":37.06,"count_perc":0.168,"time_avg":0.573,"time_perc":0.13},{"url":"\/campaigns\/7704673\/banners\/","time_sum":2474.104,"count":1398,"time_max":999.116,"count_perc":0.053,"time_avg":1.77,"time_perc":0.128},{"url":"\/campaigns\/7876648\/banners\/?","time_sum":2306.588,"count":699,"time_max":119.987,"count_perc":0.027,"time_avg":3.3,"time_perc":0.12},{"url":"\/api\/1\/banners\/?campaign=3098083","time_sum":2103.609,"count":162,"time_max":23.392,"count_perc":0.006,"time_avg":12.985,"time_perc":0.109},{"url":"\/api\/1\/photogenic_banners\/list\/?server_name=WIN7RB2","time_sum":2084.511,"count":7427,"time_max":92.944,"count_perc":0.284,"time_avg":0.281,"time_perc":0.108},{"url":"\/api\/1\/banners\/?campaign=2320799","time_sum":2027.759,"count":162,"time_max":22.252,"count_perc":0.006,"time_avg":12.517,"time_perc":0.105},{"url":"\/api\/1\/photogenic_banners\/list\/?server_name=WIN7RB3","time_sum":1988.686,"count":6134,"time_max":189.552,"count_perc":0.235,"time_avg":0.324,"time_perc":0.103},{"url":"\/campaigns\/statistic\/?date1=01-06-2017&date2=30-06-2017&date_type=day&do=1&c=7854433&c=7894082&c=7854372&c=7854358&c=7876648&c=7859612&c=7854380&c=7854359&c=7854476&c=7854362&c=7859598&c=7854352&c=7854376&c=7894070&c=7854473&c=7854456&c=7876633&c=7854458&c=7876636&c=7854365&c=7854366","time_sum":1988.016,"count":564,"time_max":8.575,"count_perc":0.022,"time_avg":3.525,"time_perc":0.103},{"url":"\/api\/1\/photogenic_banners\/list\/?server_name=WIN7RB4","time_sum":1938.943,"count":5889,"time_max":110.481,"count_perc":0.225,"time_avg":0.329,"time_perc":0.101},{"url":"\/campaigns\/7894082\/banners\/?","time_sum":1931.191,"count":699,"time_max":119.978,"count_perc":0.027,"time_avg":2.763,"time_perc":0.1},{"url":"\/campaigns\/7854473\/banners\/?filter=started&direct=desc&order=ctr_cnt_tzday","time_sum":1928.779,"count":1208,"time_max":854.832,"count_perc":0.046,"time_avg":1.597,"time_perc":0.1},{"url":"\/api\/1\/photogenic_banners\/list\/?server_name=WIN7RB5","time_sum":1927.815,"count":5422,"time_max":208.48,"count_perc":0.207,"time_avg":0.356,"time_perc":0.1},{"url":"\/","time_sum":1911.696,"count":1188,"time_max":459.369,"count_perc":0.045,"time_avg":1.609,"time_perc":0.099},{"url":"\/campaigns\/7854352\/banners\/?filter=started&direct=desc&order=ctr_cnt_tzday","time_sum":1899.792,"count":1127,"time_max":859.076,"count_perc":0.043,"time_avg":1.686,"time_perc":0.099},{"url":"\/campaigns\/7854352\/banners\/?","time_sum":1802.669,"count":699,"time_max":36.953,"count_perc":0.027,"time_avg":2.579,"time_perc":0.094},{"url":"\/agency\/campaigns\/6465912\/banners\/bulk_read\/","time_sum":1744.259,"count":28,"time_max":74.77,"count_perc":0.001,"time_avg":62.295,"time_perc":0.09},{"url":"\/api\/1\/photogenic_banners\/list\/?server_name=WIN7RB1","time_sum":1738.159,"count":4844,"time_max":194.814,"count_perc":0.185,"time_avg":0.359,"time_perc":0.09},{"url":"\/api\/1\/banners\/?campaign=3098094","time_sum":1736.358,"count":162,"time_max":26.641,"count_perc":0.006,"time_avg":10.718,"time_perc":0.09},{"url":"\/campaigns\/7854358\/banners\/?","time_sum":1727.015,"count":700,"time_max":12.327,"count_perc":0.027,"time_avg":2.467,"time_perc":0.09},{"url":"\/accounts\/login\/","time_sum":1672.363,"count":6899,"time_max":119.954,"count_perc":0.264,"time_avg":0.242,"time_perc":0.087},{"url":"\/campaigns\/7894070\/banners\/?","time_sum":1656.349,"count":699,"time_max":119.975,"count_perc":0.027,"time_avg":2.37,"time_perc":0.086},{"url":"\/export\/appinstall_raw\/2017-06-29\/","time_sum":1615.594,"count":158441,"time_max":24.3,"count_perc":6.062,"time_avg":0.01,"time_perc":0.084},{"url":"\/api\/v2\/slot\/4499\/groups","time_sum":1610.416,"count":189,"time_max":14.695,"count_perc":0.007,"time_avg":8.521,"time_perc":0.084},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreySergeevich","time_sum":1603.197,"count":2726,"time_max":185.467,"count_perc":0.104,"time_avg":0.588,"time_perc":0.083},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreySemenovich","time_sum":1589.202,"count":2738,"time_max":167.33,"count_perc":0.105,"time_avg":0.58,"time_perc":0.082},{"url":"\/campaigns\/7854365\/banners\/?","time_sum":1586.433,"count":699,"time_max":8.933,"count_perc":0.027,"time_avg":2.27,"time_perc":0.082},{"url":"\/campaigns\/7854458\/banners\/?","time_sum":1569.018,"count":699,"time_max":9.828,"count_perc":0.027,"time_avg":2.245,"time_perc":0.081},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreyIlich","time_sum":1539.031,"count":2736,"time_max":157.167,"count_perc":0.105,"time_avg":0.563,"time_perc":0.08},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreyIvanovich","time_sum":1506.429,"count":2742,"time_max":192.77,"count_perc":0.105,"time_avg":0.549,"time_perc":0.078},{"url":"\/agencies\/t1_agency_check_sync\/?year=2017&month=5&csv=1","time_sum":1498.879,"count":4,"time_max":491.112,"count_perc":0.0,"time_avg":374.72,"time_perc":0.078},{"url":"\/api\/1\/banners\/?campaign=3431890","time_sum":1485.311,"count":106,"time_max":23.844,"count_perc":0.004,"time_avg":14.012,"time_perc":0.077},{"url":"\/sites\/278\/","time_sum":1478.121,"count":128,"time_max":65.177,"count_perc":0.005,"time_avg":11.548,"time_perc":0.077},{"url":"\/campaigns\/7854372\/banners\/?filter=started&direct=desc&order=ctr_cnt_tzday","time_sum":1467.638,"count":1175,"time_max":504.72,"count_perc":0.045,"time_avg":1.249,"time_perc":0.076},{"url":"\/campaigns\/7854366\/banners\/?filter=started&direct=desc&order=ctr_cnt_tzday","time_sum":1457.573,"count":1154,"time_max":504.301,"count_perc":0.044,"time_avg":1.263,"time_perc":0.076},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreyVadimovich","time_sum":1454.916,"count":2740,"time_max":206.559,"count_perc":0.105,"time_avg":0.531,"time_perc":0.075},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreyPetrovich","time_sum":1451.139,"count":2731,"time_max":206.7,"count_perc":0.104,"time_avg":0.531,"time_perc":0.075},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreyEfimovich","time_sum":1397.906,"count":2737,"time_max":181.827,"count_perc":0.105,"time_avg":0.511,"time_perc":0.073},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreyKuzmich","time_sum":1355.163,"count":2730,"time_max":213.781,"count_perc":0.104,"time_avg":0.496,"time_perc":0.07},{"url":"\/campaigns\/7854376\/banners\/?filter=started&direct=desc&order=ctr_cnt_tzday","time_sum":1334.486,"count":972,"time_max":503.2,"count_perc":0.037,"time_avg":1.373,"time_perc":0.069},{"url":"\/api\/1\/flash_banners\/list\/?server_name=AndreyLvovich","time_sum":1330.812,"count":2739,"time_max":134.341,"count_perc":0.105,"time_avg":0.486,"time_perc":0.069},{"url":"\/api\/v2\/banner\/21456892","time_sum":1302.96,"count":6894,"time_max":5.738,"count_perc":0.264,"time_avg":0.189,"time_perc":0.068},{"url":"\/api\/v2\/banner\/16848376","time_sum":1298.932,"count":6893,"time_max":5.828,"count_perc":0.264,"time_avg":0.188,"time_perc":0.067},{"url":"\/api\/v2\/banner\/794450","time_sum":1289.157,"count":7415,"time_max":4.244,"count_perc":0.284,"time_avg":0.174,"time_perc":0.067},{"url":"\/api\/v2\/banner\/15521472","time_sum":1266.05,"count":6893,"time_max":1.462,"count_perc":0.264,"time_avg":0.184,"time_perc":0.066},{"url":"\/api\/v2\/banner\/16168711","time_sum":1241.433,"count":6894,"time_max":1.775,"count_perc":0.264,"time_avg":0.18,"time_perc":0.064},{"url":"\/api\/v2\/banner\/16028459","time_sum":1233.569,"count":6893,"time_max":1.712,"count_perc":0.264,"time_avg":0.179,"time_perc":0.064},{"url":"\/api\/v2\/banner\/1279875","time_sum":1233.049,"count":6893,"time_max":1.641,"count_perc":0.264,"time_avg":0.179,"time_perc":0.064},{"url":"\/api\/v2\/banner\/16852664","time_sum":1217.632,"count":6894,"time_max":2.661,"count_perc":0.264,"time_avg":0.177,"time_perc":0.063},{"url":"\/api\/v2\/banner\/16803530","time_sum":1206.245,"count":6894,"time_max":6.571,"count_perc":0.264,"time_avg":0.175,"time_perc":0.063},{"url":"\/api\/v2\/banner\/1218585","time_sum":1202.873,"count":6893,"time_max":1.744,"count_perc":0.264,"time_avg":0.175,"time_perc":0.062},{"url":"\/api\/v2\/banner\/17708598","time_sum":1201.32,"count":6893,"time_max":9.107,"count_perc":0.264,"time_avg":0.174,"time_perc":0.062},{"url":"\/api\/v2\/banner\/25398145","time_sum":1200.775,"count":6891,"time_max":1.949,"count_perc":0.264,"time_avg":0.174,"time_perc":0.062},{"url":"\/api\/v2\/slot\/6191\/groups","time_sum":1180.13,"count":784,"time_max":3.881,"count_perc":0.03,"time_avg":1.505,"time_perc":0.061},{"url":"\/api\/v2\/banner\/24824230","time_sum":1168.919,"count":6630,"time_max":1.73,"count_perc":0.254,"time_avg":0.176,"time_perc":0.061},{"url":"\/api\/v2\/banner\/227223","time_sum":1164.696,"count":6370,"time_max":1.376,"count_perc":0.244,"time_avg":0.183,"time_perc":0.06},{"url":"\/api\/v2\/banner\/1717161","time_sum":1162.852,"count":6633,"time_max":1.6,"count_perc":0.254,"time_avg":0.175,"time_perc":0.06},{"url":"\/campaigns\/7854358\/banners\/?filter=started&direct=desc&order=ctr_cnt_tzday","time_sum":1118.517,"count":804,"time_max":511.729,"count_perc":0.031,"time_avg":1.391,"time_perc":0.058},{"url":"\/api\/v2\/banner\/26350274","time_sum":1117.333,"count":6370,"time_max":4.843,"count_perc":0.244,"time_avg":0.175,"time_perc":0.058},{"url":"\/campaigns\/?filter=active","time_sum":1109.877,"count":723,"time_max":50.844,"count_perc":0.028,"time_avg":1.535,"time_perc":0.058},{"url":"\/agency\/prices\/3754\/campaigns\/bulk_read\/","time_sum":1083.04,"count":28,"time_max":934.761,"count_perc":0.001,"time_avg":38.68,"time_perc":0.056},{"url":"\/campaigns\/7843131\/banners\/","time_sum":1048.27,"count":88,"time_max":423.651,"count_perc":0.003,"time_avg":11.912,"time_perc":0.054}];
    var reportDates;
    var columns = new Array();
    var lastRow = 150;
    var $table = $(".report-table-body");
    var $header = $(".report-table-header-row");
    var $selector = $(".report-date-selector");

    $(document).ready(function() {
      $(window).bind("scroll", bindScroll);
        var row = table[0];
        for (k in row) {
          columns.push(k);
        }
        columns = columns.sort();
        columns = columns.slice(columns.length -1, columns.length).concat(columns.slice(0, columns.length -1));
        drawColumns();
        drawRows(table.slice(0, lastRow));
        $(".report-table").tablesorter(); 
    });

    function drawColumns() {
      for (var i = 0; i < columns.length; i++) {
        var $th = $("<th></th>").text(columns[i])
                                .addClass("report-table-header-cell")
        $header.append($th);
      }
    }

    function drawRows(rows) {
      for (var i = 0; i < rows.length; i++) {
        var row = rows[i];
        var $row = $("<tr></tr>").addClass("report-table-body-row");
        for (var j = 0; j < columns.length; j++) {
          var columnName = columns[j];
          var $cell = $("<td></td>").addClass("report-table-body-cell");
          if (columnName == "url") {
            var url = "https://rb.mail.ru" + row[columnName];
            var $link = $("<a></a>").attr("href", url)
                                    .attr("title", url)
                                    .attr("target", "_blank")
                                    .addClass("clipped")
                                    .addClass("url")
                                    .text(row[columnName]);
            $cell.addClass("report-table-body-cell-url");
            $cell.append($link);
          }
          else {
            $cell.text(row[columnName]);
            if (columnName == "time_avg" && row[columnName] > 0.9) {
              $cell.addClass("alert");
            }
          }
          $row.append($cell);
        }
        $table.append($row);
      }
      $(".report-table").trigger("update"); 
    }

    function bindScroll() {
      if($(window).scrollTop() == $(document).height() - $(window).height()) {
        if (lastRow < 1000) {
          drawRows(table.slice(lastRow, lastRow + 50));
          lastRow += 50;
        }
      }
    }

  }(window.jQuery)
  </script>
</body>
</html>
